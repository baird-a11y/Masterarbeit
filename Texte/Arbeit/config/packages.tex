% ============================================================================
% PAKETE – für KOMA-Script (scrreprt) optimiert
% ============================================================================

% ---- Schrift & Sprache ----
\usepackage[utf8]{inputenc}        % bei pdfLaTeX
\usepackage[T1]{fontenc}
\usepackage[ngerman,english]{babel}
\usepackage{lmodern}
\usepackage{csquotes}

% ---- Mathematik ----
\usepackage{amsmath, amssymb, amsthm, amsfonts, mathtools}
\usepackage{bm}                     % bold math symbols
\usepackage{physics}                % \pdv, \norm, etc.
\usepackage{siunitx}

% ---- Seitenlayout ----
\usepackage{geometry}
\geometry{margin=2.5cm}

% ---- Tabellen ----
\usepackage{booktabs}
\usepackage{longtable}

% ---- Grafiken ----
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tikz}
\usetikzlibrary{positioning, shapes.geometric, arrows, arrows.meta, fit, calc}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

% ---- Code & Algorithmen ----
\usepackage{xcolor}
\usepackage{listings}
\usepackage{algorithm}
\usepackage{algpseudocode}

% ---- Listen & Aufzählungen ----
\usepackage{enumitem}

% ---- Boxen & Hervorhebungen ----
\usepackage{tcolorbox}
\tcbuselibrary{listings,skins}

% ---- Literatur (BibLaTeX) ----
%\usepackage[
%    backend=biber,
%    style=authoryear,
%    maxbibnames=2,
%    defernumbers=true
%]{biblatex}
%\addbibresource{references.bib}


\usepackage[
    backend=biber,
    style=authoryear,
    maxbibnames=2,
    defernumbers=true,
    labelnumber=true % Erzeugt intern die Nummern trotz Autor-Jahr-Stil
]{biblatex}
\addbibresource{references.bib}

% --- Layout-Anpassung für Nummern im Verzeichnis ---
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}} % Nummern in [ ] setzen

\defbibenvironment{bibliography}
  {\list
     {\printtext[labelnumberwidth]{%
        \printfield{labelprefix}%
        \printfield{labelnumber}}}
     {\setlength{\labelwidth}{\labelnumberwidth}%
      \setlength{\leftmargin}{\labelwidth}%
      \setlength{\labelsep}{\biblabelsep}%
      \addtolength{\leftmargin}{\labelsep}%
      \setlength{\itemsep}{\bibitemsep}%
      \setlength{\parsep}{\bibparsep}}%
      \renewcommand*{\makelabel}[1]{##1\hss}}
  {\endlist}
  {\item}



% ---- Zeilenabstand ----
\usepackage{setspace}
\onehalfspacing

% ---- Seitenstil mit KOMA: Kopf-/Fußzeilen ----
\usepackage[headsepline,automark]{scrlayer-scrpage}
\clearpairofpagestyles
\ihead{\headmark}       % Kapitel / Abschnitt in der Kopfzeile innen
\ohead{\thepage}        % Seitenzahl außen
\pagestyle{scrheadings}

% ---- Hyperref (fast zuletzt) ----
\usepackage[hidelinks]{hyperref}

% ---- Cleveref (nach hyperref) ----
\usepackage{cleveref}
